<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">      

	<body>

		<div layout:fragment="content">
			
			<ul class="nav nav-tabs" id="myTab" role="tablist">
  				
  				<li class="nav-item">
    				<a class="nav-link active" id="pedido-tab" data-toggle="tab" href="#solicitados" role="tab" aria-controls="home" aria-selected="true">Solicitudes realizadas</a>
  				</li>
  				
  				<li class="nav-item">
    				<a class="nav-link" id="recibido-tab" data-toggle="tab" href="#recibidos" role="tab" aria-controls="profile" aria-selected="false">Solicitudes recibidas</a>
				  </li>
				 <div class="col-md-8" id="cambioEstado" style="text-align: end;">
				  	<select  class="form-group selectpicker"   id="valorEstado">
								 <option value ="1" >Confirmado</option>
  								<option value ="2">Pendiente</option>
  								<option value ="3">Rechazado</option>
					</select>
  				</div>
			</ul>
		<br />
			<div id="partialSolicitudes">
			<div class="tab-content" id="myTabContent">
  				<div class="tab-pane fade show active" id="solicitados" role="tabpanel" aria-labelledby="home-tab">
					<table id="tabla" class="table table-striped table-bordered table-hover" style="width:100%">
   						 <thead>
        					<tr>        					
            				<th>Colaborador</th>
            				<th>Producto solicitado</th>
            				<th>Estado</th> 
            				<th></th>
            				<th></th>
             				<th></th>
             				</tr>
    					</thead>
    					<tbody>        
       						 <tr th:each="solicitud : ${solicitudesRealizadas}">        	    					
       	    					<td><span th:text="${solicitud.colaborador}" /></td>                       					
            					<td><span th:text="${solicitud.pedido.producto.descripcion}" /></td>
            					<td>
            						<span th:switch="${solicitud.estado}">
            							<p th:case="1" style="color: green"><strong>Confirmado</strong></p>
            							<p th:case="2" style="color: #d67d09"><strong>Pendiente</strong></p>
            							<p th:case="3" style="color: red"><strong>Rechazado</strong></p>
            						</span>
            					</td>
            					<td></td>
            					<td></td>
            					<td></td>      
            					<!--<td style="text-align:center; cursor:pointer;">
            					 <div class="abrirCercanos" th:data-value="${local.id}">            	
            						<p>Ver cercanos</p>
            					</div>
            					 
            					</td>
           						<td style="text-align:center">
           							<div class="actualizar" th:data-value="${local.id}">
           								<i class="fa fa-edit" style="font-size: 24px; color: grey;" aria-hidden="true"></i>
           							</div>
           						</td>
            					<td  style="text-align:center">
            						<form action="#" th:action="@{/local/eliminar/{id}(id=${local.id})}" method="post">
	              						<button class="fa fa-trash" type="submit" style="font-size: 24px; color: black;border: 0 !important;" aria-hidden="true"></button>
            						</form>
            					</td>-->
        					</tr>        
    				</tbody>
				</table>
<!--  **************************************************    RECIBIDOS ******************************************************************* -->				
			</div>
  				<div class="tab-pane fade" id="recibidos" role="tabpanel" aria-labelledby="profile-tab">
  					<table id="recibido" class="table table-striped table-bordered table-hover" style="width:100%">
   						 <thead>
        					<tr>
            				<th>Solicitante</th>
            				<th>Producto solicitado</th>
            				<th>Estado</th> 
            				<th></th>
            				<th></th>
             				<th></th>
             				</tr>
    					</thead>
    					<tbody>        
       						 <tr th:each="recibida : ${solicitudesRecibidas}">        	    					
       	    					<td><span th:text="${recibida.solicitador}" /></td>                       					
            					<td><span th:text="${recibida.pedido.producto.descripcion}" /></td>
            					<td>
            						<span th:switch="${solicitud.estado}">
            							<p th:case="1" style="color: green"><strong>Confirmado</strong></p>
            							<p th:case="2" style="color: #d67d09"><strong>Pendiente</strong></p>
            							<p th:case="3" style="color: red"><strong>Rechazado</strong></p>
            						</span>
            					</td>
            					<td></td> 
            					<td></td>
            					<td></td>                     			            				
        					</tr>        
    				</tbody>
				</table>
  				</div>
  				
			</div>
			
		</div>
	</div>
	</body>

</html>
<script>
$(document).ready(
	     function () {
        $('#recibido').DataTable({
            language: {
                "decimal": "",
                "emptyTable": "Sin informacion",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ Entradas",
                "infoEmpty": "Mostrando 0 to 0 of 0 Entradas",
                "infoFiltered": "(Filtrado de _MAX_ total entradas)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "Mostrar _MENU_ Entradas",
                "loadingRecords": "Cargando...",
                "processing": "Procesando...",
                "search": "Buscar:",
                "zeroRecords": "Sin resultados encontrados",
                "paginate": {
                    "first": "Primero",
                    "last": "Último",
                    "next": "Siguiente",
                    "previous": "Anterior"
                }
            },

        lengthMenu: [5, 10, 15],
        });
});
		
			$("#cambioEstado").click(function() {
				$.ajax({ //https://api.jquery.com/jquery.ajax/ => Examples:
					method: "GET",
					 url: "/solicitudStock/filtrarSolicitudes",
					 data: {estado: parseInt($("#valorEstado").val())}
				}).
				done(function(result) {
					$("#partialSolicitudes").html(result);
				})
				.fail(function() {
					alert("error");
				});			
			
		});
</script>